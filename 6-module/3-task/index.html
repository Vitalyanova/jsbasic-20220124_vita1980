<!DOCTYPE html>
<html>

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Бангкок Экспресс: Карусель</title>

    <link rel="stylesheet" href="./index.css" />
    <link rel="stylesheet" href="/assets/styles/common.css" />
  </head>

  <body>
    <div class="container">
    </div>

    <script type="module">
    import slides from './slides.js';
    import Carousel from './index.js';

    let carousel = new Carousel(slides);
    let containerElement = document.body.querySelector('.container');

    containerElement.append(carousel.elem);
    let slidesContainer = containerElement.querySelector('.carousel__inner');

    let position = 0; // положение ленты прокрутки
    let currentSlide = 0; // номер текущего слайда
    let last = slidesContainer.querySelectorAll('.carousel__slide').length - 1; //номер последнего слайда
    let left = containerElement.querySelector('.carousel__arrow.carousel__arrow_left');  //кнопка влево
    left.style.display = 'none';
    
    const inLeft = () => {
      // сдвиг влево
      position += document.querySelector('.carousel__img').width;
      if (currentSlide > 0) currentSlide -= 1;
      slidesContainer.style.transform = 'translateX(' + position + 'px)';
      if (currentSlide == 0) left.style.display = 'none';
      if (currentSlide < last) right.style.display = '';
    };
    
    left.addEventListener('click', inLeft);
    
    let right = containerElement.querySelector('.carousel__arrow.carousel__arrow_right'); //кнопка вправо
    
    const inRight = () => {
      //сдевиг вправо
      position -= document.querySelector('.carousel__img').width;
      if (currentSlide < last) currentSlide += 1;
      slidesContainer.style.transform = 'translateX(' + position + 'px)';
      if (currentSlide > 0) left.style.display = '';
      if (currentSlide == last) right.style.display = 'none';
    };
    
    right.addEventListener('click', inRight);

  </script>
  </body>

</html>
